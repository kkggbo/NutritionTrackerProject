
# 🥗 NutritionTrackerProject

一个基于 Java + Spring Boot 开发的个人营养追踪管理系统，支持用户记录日常饮食、管理食物库、查看摄入详情等功能，帮助用户实现健康饮食和科学营养目标。

---

## 📌 项目简介

**NutritionTrackerProject** 是一个为用户提供营养摄入追踪的 Web 应用，用户可自定义食物信息，记录每日摄入食物及重量，系统根据每 100g 营养值自动计算总摄入量，便于用户查看和管理饮食结构。

---

## 🛠 技术栈

- **后端框架**：Spring Boot, MyBatis, Spring Cloud, Spring Cloud Alibaba
- **前端框架**：Vue3, Element Plus
- **安全认证**：JWT, JJWT
- **数据库 & 缓存**：MySQL, Redis
- **工具库**：Lombok, Git, Postman, Jmeter
- **构建工具**：Maven
- **容器化 & 部署**：Docker
- **微服务**：Nacos, OpenFeign, LoadBalancer, Sentinel, Gateway, Seata
- **存储服务**：MinIO
- **消息队列**：RabbitMQ

---

## 🚧 TODO（未来功能计划）

- 完善个人中心
- 添加饮食建议与营养目标管理
- 自定义食谱
- 每日运动打卡
- 使用消息队列实现禁食挑战功能
- 导出饮食报告 PDF 或 Excel
- 用 Redis 定时任务 + 消息队列（RocketMQ/Kafka）实现餐饮提醒。
---

## 📘 项目开发日志与接口文档 | Development Log And Interface Documentation

记录项目的开发过程与阶段性成果。

---

#### 接口文档访问地址：`https://www.showdoc.com.cn/2598840805244740/0`
#### 访问密码：`052199`

---

### 🗓️ 2025.05.25

✅ 项目创建  
✅ 后端接口开发：

- 用户注册与登录（支持 **JWT 鉴权**）
- 设置与获取个人信息（性别、年龄、身高、体重等）
- 用户自定义添加食物项：
  - 食物名
  - 每 100g 的卡路里 / 蛋白质 / 碳水 / 脂肪
- 查询当前用户所有录入的食物
- 添加进食记录：
  - 选择食物
  - 输入摄入克数
  - 自动计算营养摄入（重量 × 每 100g 数据）
- 按日期查看摄入记录并统计：
  - 总卡路里
  - 总蛋白质
  - 总碳水
  - 总脂肪

---

### 🗓️ 2025.05.27

✅ 编写与完善项目接口文档  
✅ 前端工程初始化与搭建  
✅ 实现用户登录与注册界面  

---

### 🗓️ 2025.05.28

✅ 实现用户登录与注册功能（前后端联调）  

---

### 🗓️ 2025.05.30

✅ 完成用户信息收集界面  
✅ 完成用户摄入日记界面  
✅ 通过路由实现登录/注册后网页的跳转  
✅ 通过 pinia 实现 token 的持久化储存  
✅ 通过请求拦截器实现自动将 token 携带到请求头中  
✅ 优化用户信息表，添加了 BMI、BMR、运动目标、活动等级、建议卡路里摄入量等列  
✅ 实现通过前端收集的数据，在后端计算用户的 BMI、BMR、建议卡路里等数据  
📝 TODO：通过拦截器实现在后端的 token 校验（鉴权）、完成用户摄入日记界面数据显示  

---

### 🗓️ 2025.06.01

✅ 通过拦截器实现在后端的 token 校验（鉴权）  
✅ 实现查询用户每日热量摄入目标及计算营养素摄入目标功能   
✅ 实现前端日记页发起获取相关数据请求方法  
✅ 优化接口文档  
📝 TODO 实现用户添加自定义食物前端页面  
📝 TODO 实现用户添加已食用食物页面  

---

### 🗓️ 2025.06.02

✅ 实现查看特定食物详细信息的前端显示与后端查询功能  
✅ 实现查看查询食物列表的前端显示与后端分页查询功能  

---
### 🗓️ 2025.06.03

✅ 实现选择并添加食物到某一餐的功能  
✅ 实现diary页面，用户可查看当天营养素摄入情况并选择某一餐添加食物  
✅ 实现餐次详细页面和数据展示，用户可查看当天某一餐中摄入的食物及其营养素含量  
📝 TODO 向一餐中重复添加相同食物时在数据库已存在的行中修改而不是新建一行   
📝 TODO 在餐次详细页面中，允许用户对食物进行添加、修改和删除操作  

---

### 🗓️ 2025.06.06

✅ 在餐次详细页面中，允许用户对食物进行添加、修改和删除操作  
✅ 向一餐中重复添加相同食物时在数据库已存在的行中修改而不是新建一行   
📝 TODO 实现用户自定义添加食物的前端页面  
📝 TODO 允许用户对食物进行收藏  
📝 TODO 实现在查询食物列表中用户可查看收藏的食物和最近食用的食物   
📝 TODO 实现食物标签显示（如：低碳水化合物，低脂肪，高蛋白，高卡路里等）   
📝 TODO 使用Redis缓存部分查询结果，减少对mysql的访问压力   
📝 TODO 开发新模块：食谱模块，允许用户自定义编辑食谱。食谱中包含菜品简介、营养成分、预计时间、原材料、制作步骤等内容   

---

### 🗓️ 2025.06.07
✅ 实现用户自定义添加食物的前端页面与功能实现    
✅ 实现用户收藏食物功能    
✅ 实现在查询食物列表中用户可查看收藏的食物和最近食用的食物    

---

### 🗓️ 2025.06.08
✅ 实现食物的标签显示功能，新增食物时自动为食物添加标签，并在前端食物详情页中展示     
✅ 开始使用Redis缓存，减小数据库访问压力  
✅ 食物列表查询时先访问Redis缓存，没有缓存数据时再访问mysql并存入Redis，添加新食物后删除Redis缓存数据  
📝 TODO 使用Redis缓存其它查询结果    
📝 TODO 将项目拆分为微服务项目  

---

### 🗓️ 2025.06.09
✅ 为以下内容添加了Redis缓存功能：查询食物详细信息、查询某一餐的详细信息、查询食物收藏状态、查询收藏的食物列表、查询最近食用的食物列表、查询食物标签、查询日记  
✅ 实现在修改mysql数据时删除对应的缓存信息  
✅ 利用缓存空结果避免缓存穿透   
✅ 利用随机ttl避免缓存雪崩   
✅ 重写、优化接口文档，并把接口文档转移到ShowDoc中储存 

---

### 🗓️ 2025.08.23
✅ 将原有的单体项目成功拆分为多个独立的微服务，包括用户服务、食物服务、授权服务  
✅ 引入 Nacos 作为注册中心和配置中心（通过Docker部署在虚拟机上）  
✅ 集成 OpenFeign 实现了微服务之间的远程调用（实现用户服务远程调用食物服务的查询当日摄入功能）  
📝 TODO 引入 GateWay网关实现统一入口和统一安全认证等功能   
📝 TODO 引入 Sentinel实现服务的限流、熔断、降级等功能 

---

### 🗓️ 2025.08.25
✅ 引入网关并实现解析jwt令牌并将userId传递给微服务  
✅ 实现微服务之间用OpenFeign远程调用时传递用户id并用拦截器储存到被调用服务的ThreadLocal  

---

### 🗓️ 2025.08.26
✅ 引入sentinel  
✅ 为user-service远程调用food-service的接口提供了fallback逻辑

---

### 🗓️ 2025.08.27
✅ 用户登录时可勾选记住我选框，token有效期变为14天而不是默认的12小时  
✅ 开发用户个人中心界面，用户可以在此页面查看和修改个人信息

---

### 🗓️ 2025.08.28
✅ 创建食谱微服务模块（recipe-service），计划用户可以上传自定义食谱并且查看其他用户上传的食谱  
✅ 在数据库中创建recipe表用于储存食谱信息，创建recipe_food食谱食材表用于关联食谱及其原料  
✅ 完成食谱微服务的添加新食谱功能    
📝 TODO 实现查看食谱、搜索食谱（分页，分类）、更新食谱、删除食谱等功能  
📝 TODO 实现食谱模块的前端页面显示

---

### 🗓️ 2025.08.29
✅ 完成食谱模块的增删改查功能  
📝 TODO 实现食谱模块的前端页面显示  
📝 TODO 食谱实现分页查询、条件查询  
📝 TODO 实现查询结果缓存到Redis，远程调用fallBack逻辑  

---

### 🗓️ 2025.08.30
✅ 食谱实现分页查询、条件查询  
✅ 实现查询结果缓存到Redis  

---

### 🗓️ 2025.09.01
✅ 完成食谱模块分页、条件查询的前端页面  
📝 TODO 实现食谱详细信息的前端页面  
📝 TODO 实现远程调用fallBack逻辑  
📝 TODO 允许用户上传图片（食谱照片、自定义头像等）

---

### 🗓️ 2025.09.02
✅ 实现食谱详细信息的前端页面  
✅ 实现从食谱查询页面跳转到详情页面的功能  
📝 TODO 实现远程调用fallBack逻辑    
📝 TODO 允许用户上传图片（食谱照片、自定义头像等）  
📝 TODO 实现食谱详情页中的点赞、收藏、评论功能  

---

### 🗓️ 2025.09.04
✅ 实现食谱详情页中的点赞、收藏、评论功能   
✅ TODO 实现远程调用food-service时的fallBack逻辑     
📝 TODO 允许用户上传图片（食谱照片、自定义头像等）  

---

### 🗓️ 2025.09.05

✅ 集成 MinIO，实现食谱模块图片上传与回显  
✅ 完成上传食谱页面部分开发，包含初步布局与交互  
📝 TODO 完成上传食谱页面剩余部分开发（请求数据、实现上传功能）
📝 TODO 允许用户上传头像

---

### 🗓️ 2025.09.07

✅ 完成上传食谱页面剩余部分开发  
✅ 完成食谱图片上传与显示功能  
📝 TODO 集成Seata分布式事务，开发积分功能  
📝 TODO 允许用户上传头像  
📝 TODO 开发图表功能，追踪用户一段时间内的摄入情况和体重变化情况等数据  

---

### 🗓️ 2025.09.09

✅ 集成 RabbitMQ 消息队列（代码中通过注解创建交换机、队列和绑定）  
✅ 实现点赞加积分功能，其他用户给食谱点赞后食谱创建者会获得10点积分（在 recipe-service 中发送消息，使用 @RabbitListener 注解方式监听 user-points-queue）  
📝 TODO 集成Seata分布式事务
📝 开发挑战模块

---

### 🗓️ 2025.09.10

✅ 开发挑战模块。允许用户开始一些列预设的挑战（比如8小时禁食挑战、7天禁糖挑战等），使用RabbitMQ死信交换机实现延迟队列，挑战开始后设置挑战时间长的ttl发送到延时交换机，达到挑战时间后进入死心交换机和死信队列被消费，若数据库中挑战状态为进行中则改为挑战成功并发送积分奖励，否则（用户可中途取消）忽略。

---

### 🗓️ 2025.09.09

✅ 集成Seata分布式事务
✅ 开发reward-service模块，让用户可以消费积分兑换礼品。兑换过程为：在reward-service中查询库存、调用user-service扣除积分、扣减库存、创建订单。整个过程受到Seata的全局事务保护。

---

欢迎 Star ⭐ 本项目或提出 Issue 与建议，一起让它变得更好！
